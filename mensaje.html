<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
    <title>NVIV/mensaje</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: black;
        touch-action: manipulation;
      }
      .contenedor {
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
        transition: transform 1s ease;
      }
      @media screen and (max-aspect-ratio: 9/16) {
        .contenedor {
          height: 100vh;
          width: 100vw;
        }
      }
      #parte1 {
        background-image: url('https://lh3.googleusercontent.com/d/1NNYB7WUdvdZt1ulWDzuK5Q6pMQUZFpAf=s3000');
        background-size: cover;
        background-position: center;
      }
      #boton1 {
        width: 500px;
        height: 500px;
        border-radius: 50%;
        background: rgba(0,0,0,0);
        color: rgba(0,0,0,0);
        font-size: 5em;
        border: none;
        text-align: center;
        cursor: pointer;
        position: relative;
        overflow: hidden;
        box-shadow: 0 0 20px 5px rgba(255,255,255,0.5);
      }
      #parte2 {
        background-image: url('https://lh3.googleusercontent.com/d/16TzmbRshGiJX2V2CPPO8NUlQgac293RM=s3000');
        background-size: cover;
        background-position: center;
        color: #FFF;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        height: 100%;
      }      
      #textoVideo {
        font-size: 1.5em;
        text-align: center;
        padding: 20px;
        color: #FFF;
        font-weight: bold;
      }
      #boton2 {
        position: absolute;
        bottom: 2%;
        right: 5%;
        width: 2em;
        height: 2em;
        border-radius: 50%;
        background: rgba(0,0,0,0.2);
        color: #FFF;
        font-size: 1.5em;
        border: 2px solid #FFF;
        cursor: pointer;
        text-align: center;
        backdrop-filter: blur(5px);
        transition: background 0.3s;
      }
      #boton2:active {
        background: rgba(255,255,255,0.5);
      }
      .oculto {
        display: none;
        width: 0;
        height: 0;
      }
    </style>
  </head>
  <body>
    <div id="parte1" class="contenedor">
      <button id="boton1"><i class="fa-solid fa-circle"></i></button>
    </div>
    <div id="parte2" class="contenedor">
      <div id="textoVideo">...</div>
      <button id="boton2"><i class="fa-solid fa-rotate-right"></i></button>
    </div>
    <div id="player1" class="oculto"></div>
    <div id="player2" class="oculto"></div>
    <script src="https://www.youtube.com/iframe_api"></script>
    <script>
      const PLAYLIST1 = "PLTsg_kaNc_ZZeFRJl0yL-pAUyNXLbE5Aj";
      const PLAYLIST2 = "PLTsg_kaNc_ZbTyFbk6mexc6TOoQprOhuK";
      let player1, player2;
      let parte1 = document.getElementById("parte1");
      let parte2 = document.getElementById("parte2");
      let textoVideo = document.getElementById("textoVideo");
      function onYouTubeIframeAPIReady() {
        player1 = new YT.Player('player1', {
          height: '0',
          width: '0',
          playerVars: {
            listType: 'playlist',
            list: PLAYLIST1,
            autoplay: 0,
            controls: 0,
            loop: 1,
            modestbranding: 1
          },
          events: {
            'onReady': onPlayer1Ready,
            'onStateChange': onPlayer1StateChange
          }
        });
        player2 = new YT.Player('player2', {
          height: '0',
          width: '0',
          playerVars: {
            listType: 'playlist',
            list: PLAYLIST2,
            autoplay: 0,
            controls: 0,
            loop: 1,
            modestbranding: 1
          },
          events: { 'onReady': onPlayer2Ready }
        });
      }
      function onPlayer1Ready(event) {
        document.getElementById("boton1").addEventListener("touchstart", () => {
          activarPantallaCompleta();
          event.target.setVolume(100);
          player2.setVolume(60);
          event.target.setShuffle(true);
          player2.setShuffle(true);
          event.target.playVideo();
          player2.playVideo();
          parte1.style.transform = "translateY(-100%)";
          parte2.style.transform = "translateY(-100%)";
        }, { once: true });
      }
      function onPlayer2Ready(event) {
      }      
      function onPlayer1StateChange(event) {
        if (event.data === YT.PlayerState.PLAYING) {
          const titulo = player1.getVideoData().title;
          textoVideo.textContent = titulo;
        } else if (event.data === YT.PlayerState.ENDED) {
          const titulo = player1.getVideoData().title;
          textoVideo.textContent = titulo;
        }
      }
      document.getElementById("boton2").addEventListener("touchstart", () => {
        location.reload();
      });
      function activarPantallaCompleta() {
        let elem = document.documentElement;
        if (elem.requestFullscreen) elem.requestFullscreen();
        else if (elem.webkitRequestFullscreen) elem.webkitRequestFullscreen();
        else if (elem.msRequestFullscreen) elem.msRequestFullscreen();
      }
    </script>
  </body>
</html>
